Reef.Regen — EAS Schema v0.4 (DB‑aligned)

Deployed raw schema (single line):
string organizationName,string[] reefRegenAction,string actionDate,string siteName,string siteType,string[] location,string locationType,string srs,uint256 siteDepthM,uint256 siteAreaSqM,string actionSummary,string[] biodiversity,string[] contributors,string fileName,string ipfsCID

Pretty format:
string organizationName,
string[] reefRegenAction,
string actionDate,
string siteName,
string siteType,
string[] location,
string locationType,
string srs,
uint256 siteDepthM,
uint256 siteAreaSqM,
string actionSummary,
string[] biodiversity,
string[] contributors,
string fileName,
string ipfsCID

Notes
- Location is [lon, lat] (strings) in GeoJSON order; enforce exactly two items in code/tests.
- `locationType` = "coordinate-decimal/lon-lat" (FE constant; not in DB).
- `srs` = "EPSG:4326" (FE constant; not in DB).
- `reefRegenAction` uses `regen_type.name` values; DB joins via ids.
- Depth/area are integers (meters, m^2) for EAS; DB may store decimals.

Depoly on https://optimism-sepolia.easscan.org/schema/view/0xe5ea0fa944171214978a03dffb9fce36faefc0bf1703cb71f1cb3c274d05e58f , oct 31

---

Historical log (pre‑v0.4)

Coral Action Attestation — EAS Schema (raw)

POC schema (already used in app):
string user

MVP schema v1 
# Recipient is always provided separately when calling attest/attestByDelegation

string regenType,
string[] regenLocation,
string regenDate,        # e.g. "MM-DD-YYYY" (human-readable)
uint256 depthScaled,       # meters x100 (e.g., 3.50m → 350)
uint256 surfaceAreaScaled, # m^2 x100 (e.g., 12.34 → 1234)
string[] species,          # multiple selections
string summary,
string[] contributors      # multiple contributors

deploy on: https://optimism-sepolia.easscan.org/schema/view/0xa3950a0da6321874b64dc329abff0119970bd34ffe9d2c1ed43446fd8ee7dd46

Rationale and notes
- Arrays: species, contributors, and regenLocation are arrays (EAS supports primitive arrays like string[]).
- Location: regenLocation is [lat, lng] as strings for simplicity (e.g., ["25.0343","-77.3963"]).
- Date: stored as a human-readable string as requested. Consider ISO (YYYY-MM-DD) to avoid locale ambiguity.
- Numeric fields: EAS does not support decimals. Use scaled integers for depth and surface area (x100) so you keep two decimals.
- Recipient: not part of schema; passed in the attestation params separately.

---

v0.3 schema extension (Filebase/IPFS)

Added field for linking off-chain evidence via IPFS (Filebase):

string fileCID

Complete v0.3 schema string:
string regenType,string[] regenLocation,string regenDate,uint256 depthScaled,uint256 surfaceAreaScaled,string[] species,string summary,string[] contributors,string fileCID

depoly on: https://optimism-sepolia.easscan.org/schema/view/0xd15191c82976ae7030dc20f56430b998d9ad586b243d29dbb58522f709af3b46

Notes
- fileCID stores the raw IPFS CID (no prefix) returned by Filebase after upload.
- The UI also stores a gateway URL off-chain (DB) for convenience; on-chain we keep only the CID.
- Gateway is configurable (e.g., https://ipfs.filebase.io/ipfs/{cid}).
